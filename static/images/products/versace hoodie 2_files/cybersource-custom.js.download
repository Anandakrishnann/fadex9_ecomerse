function validateTermsAndConditions(){if($(".pickupInStore_section").length>0){let e=$(".confirm-pickup-checkbox");return e.prop("checked")?($(".pickup-instore-error-msg").addClass("d-none"),e.closest(".review-checkbox").removeClass("error"),!0):(e.closest(".review-checkbox").addClass("error"),$(".pickup-instore-error-msg").removeClass("d-none"),!1)}return!0}var init={initConfig:function(){var e,t,a,n=!1,r={env:$("#paypal_endpoint").length>0?document.getElementById("paypal_endpoint").value:"sandbox",commit:!0,style:{label:"paypal",height:50,color:"white",shape:"rect",size:"responsive",tagline:!1},validate:function(e){$(".paypal-address").length>0&&(paypalvalidator.toggleForm(e),paypalvalidator.onChangeForm((function(){paypalvalidator.toggleForm(e)})))},payment:function(){var i=document.getElementById("paypal_express").value;return n=!!r.paymentOption.credit,a=document.getElementById("billingAgreementCheckbox"),(t=null!=a&&a.checked)?i+="?billingAgreement=true":n&&(i+="?isPayPalCredit=true"),$("body").trigger("event:paypalCheckout"),paypal.request.post(i).then((function(t){return e=t.requestID,t.processorTransactionID}))},onAuthorize:function(a,r){a={requestId:e,billingAgreementFlag:t,paymentID:a.paymentID,payerID:a.payerID,isPayPalCredit:n};var i=document.getElementById("paypal_callback").value,o=$('<form action="'+i+'" method="post"><input type="hidden" name="requestId" value="'+e+'" /><input type="hidden" name="billingAgreementFlag" value="'+t+'" /><input type="hidden" name="paymentID" value="'+a.paymentID+'" /><input type="hidden" name="payerID" value="'+a.payerID+'" /><input type="hidden" name="isPayPalCredit" value="'+n+'" /></form>');$("body").append(o),o.submit()}};return r},initPayPalButtons:function(){var e;e=!!($("#paypal_enabled").length>0&&"true"==document.getElementById("paypal_enabled").value);var t=$("#currentLocale").length>0?document.getElementById("currentLocale").value:"",a=init.initConfig();if(a.paymentOption={express:!0,credit:!1},a.locale=t,e&&$(".paypal-button-container-cart1").length>0&&paypal.Button.render(a,".paypal-button-container-cart1"),e&&$(".paypal-button-container-cart2").length>0&&paypal.Button.render(a,".paypal-button-container-cart2"),e&&$("#paypal-button-container").length>0&&paypal.Button.render(a,"#paypal-button-container"),e&&$("#paypal-credit-container").length>0){var n=init.initConfig();n.style={label:"credit",size:"small",shape:"rect"},n.paymentOption={express:!1,credit:!0},n.locale=t,paypal.Button.render(n,"#paypal-credit-container")}},initFunctions:function(){if($(document).on("click",".credit_card, .sa_flex",(function(e){if(e.stopImmediatePropagation(),$("button.place-order").prop("disabled",!0),validateTermsAndConditions()){var t=$(this).data("payerauth");window.location.href=t}})),$(document).on("click",".dw_google_pay, .paypal, .paypal_credit, .wechat",(function(e){e.stopImmediatePropagation(),$("button.place-order").prop("disabled",!0);var t=$(this).attr("data-action");setTimeout((function(){window.location.href=t}),500)})),$("body").hasClass("cyb_alipayintermediate")){setTimeout((function(){document.RedirectForm.submit(),!0}),1e3)}if($("body").hasClass("cyb_testfingerprintRedirect")){var e=document.getElementById("URl_redirect").value;setTimeout((function(){location.href=e}),1e3)}if($("div").hasClass("payerauth")&&document.PAInfoForm.submit(),$("body").hasClass("cyb_payerauthenticationredirect")&&document.RedirectForm.submit(),$("body").hasClass("cyb_unitTest_payerauth")&&document.RedirectForm.submit(),$("div").hasClass("cyb_unitTest_payerauthsubmit")&&document.PAInfoForm.submit(),$("body").hasClass("cyb_sa_redirect")){e=document.getElementById("redirect_url_sa").value;window.top.location.replace(e)}if($("div").hasClass("SecureAcceptance_IFRAME")){e=document.getElementById("sa_iframeURL").value;$(".SecureAcceptance_IFRAME").append("<iframe src="+e+'  name="hss_iframe"  width="85%" height="730px" scrolling="no" />')}$("body").hasClass("sa_iframe_request_form")&&document.form_iframe.submit(),$("body").hasClass("cyb_sa_request_form")&&($("#loading").css("display","block"),document.ePayment.submit()),$("#entry-mode-pos_unittest select.input-select").change((function(){"swiped"==this.value?$("#card-section, #sample-card-section").css("display","none"):"keyed"==this.value&&$("#card-section, #sample-card-section").css("display","block")})),$(document).on("click",".billingAgreementExpressCheckout",(function(e){e.preventDefault();var t=document.getElementById("paypal_callback").value,a=$('<form action="'+t+'" method="post"></form>');$("body").append(a),a.submit()})),$(document).on("click",".sa_silentpost, .sa_redirect, .alipay, .sof, .mch, .idl , .klarna, .wechat",(function(e){e.stopImmediatePropagation();var t=$('li[data-method-id="CREDIT_CARD"]').attr("data-sa-type"),a=$("input[name=dwfrm_billing_paymentMethod]").val(),n=$.inArray(a,["KLARNA","ALIPAY","SOF","IDL","MCH","WECHAT"])>-1;if("CREDIT_CARD"!=t&&"CREDIT_CARD"==a||n){var r=$(this).attr("data-action");setTimeout((function(){window.location.href=r}),500)}})),$(document).on("click",".sa_iframe",(function(e){e.stopImmediatePropagation();var t=$('li[data-method-id="CREDIT_CARD"]');if("SA_IFRAME"!=$(t).attr("data-sa-type"))return!0;var a=$(this).attr("data-action");$.ajax({url:a,type:"POST",success:function(e,t){return e?1==e.error?($("#saspCardError").html(e.errorMsg),$("#saspCardError").addClass("error")):($("#secureAcceptanceIframe").html(e),document.getElementById("submit-order").classList.add("d-none")):($("#saspCardError").html(e.errorMsg),$("#saspCardError").addClass("error")),!0},error:function(){$("#saspCardError").html(xhr.errorMsg).addClass("error")}})})),$("#capturepaymenttype, #authreversalpaymenttype").change((function(){"visacheckout"==$(this).val()?($("#orderRequestID").attr("required","required"),$(".orderRequestID").removeClass("hidden").addClass("show")):($("#orderRequestID").removeAttr("required"),$(".orderRequestID").removeClass("show").addClass("hidden"))}))}},paypalhelper={paypalMini:function(){var e=init.initConfig(),t=$("#currentLocale").length>0?document.getElementById("currentLocale").value:"";e.paymentOption={express:!0,credit:!1},e.locale=t;var a=!1;null!=document.getElementById("paypal_enabled")&&(a=document.getElementById("paypal_enabled").value),a&&$(".paypal-button-container-mini").length>0&&paypal.Button.render(e,".paypal-button-container-mini")},validateForms:function(){$("data-checkout-stage").attr("data-checkout-stage");return!0}},paypalvalidator={toggleForm:function(e){return this.isValid()?e.enable():e.disable()},isValid:function(){var e=$("#dwfrm_billing").serialize(),t=!1;return $("body").trigger("checkout:serializeBilling",{form:$("#dwfrm_billing"),data:e,callback:function(t){e=t}}),paypalvalidator.validateAddress((function(e){t=!e.error,e.fieldErrors.length&&e.fieldErrors.forEach((function(e){Object.keys(e).length&&paypalvalidator.loadFormErrors(".payment-form",e)}))})),t},loadFormErrors:function(e,t){$.each(t,(function(a){$("*[name="+DOMPurify.sanitize(a)+"]",e).addClass("is-invalid").siblings(".invalid-feedback").html(t[a])}))},paypalMini:function(){var e=init.initConfig();document.getElementById("paypal_enabled").value&&$(".paypal-button-container-mini").length>0&&paypal.Button.render(e,".paypal-button-container-mini")},validateAddress:function(e){var t=$("#dwfrm_billing").serialize();$.ajax({method:"POST",async:!1,data:t,url:$(".paypal-address").attr("action"),success:function(t){e(t)},error:function(e){}})},onChangeForm:function(e){$(".billing-information").on("change",e)}};$(document).ready((function(){$("body").trigger("event:paypalhelperLoaded"),init.initConfig(),init.initPayPalButtons(),init.initFunctions(),"true"==$("#isGooglePayEnabled").val()&&onGooglePayLoaded()}));